<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
        <div class="card">
          <div class="card-header text-center">
            <h4 class="text-secondary ">
              Registration</h4>
          </div>
          <div class="card-body">
            <div class="form-group col-md-11">
              <label for="username">Username</label>
              <input type="text" class="form-control" name="username" [(ngModel)]="form.username" required minlength="3"
                maxlength="20" #username="ngModel" />
              <div class="alert-danger" *ngIf="f.submitted && username.invalid">
                <div *ngIf="f.submitted && username?.errors?.['required']">Username is required</div>
                <div *ngIf="f.submitted && username?.errors?.['minlength']">
                  Username must be at least 3 characters
                </div>
                <div *ngIf="f.submitted && username?.errors?.['maxlength']">
                  Username must be at most 20 characters
                </div>
              </div>
            </div>
            <div class="form-group col-md-11">
              <label for="email">E-mail</label>
              <input type="email" class="form-control" name="email" [(ngModel)]="form.email" required email
                #email="ngModel" />
              <div class="alert-danger" *ngIf="f.submitted && email.invalid">
                <div *ngIf="f.submitted && email?.errors?.['required']">Email is required</div>
                <div *ngIf="f.submitted && email?.errors?.['email']">
                  Email must be a valid email address
                </div>
              </div>
            </div>
            <div class="form-group col-md-11">
              <label for="password">Password</label>
              <input type="password" class="form-control" name="password" [(ngModel)]="form.password" required
                minlength="6" #password="ngModel" />
              <div class="alert-danger" *ngIf="f.submitted && password.invalid">
                <div *ngIf="f.submitted && password?.errors?.['required']">Password is required</div>
                <div *ngIf="f.submitted && password?.errors?.['minlength']">
                  Password must be at least 6 characters
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="  float-right">
              <button class="btn btn-secondary" type="submit" [disabled]="!f.valid">
                Sign up
              </button>
            </div>
          </div>
        </div>
        <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
          Signup failed!<br />{{ errorMessage }}
        </div>
      </form>
      <div class="alert alert-success" *ngIf="isSuccessful">
        Your registration is successful!
      </div>
    </div>
  </div>
</div>
